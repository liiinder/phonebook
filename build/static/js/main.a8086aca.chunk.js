(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),o=t.n(r),c=(t(19),t(3)),u=t(2),a=t(0),i=function(e){var n=e.persons,t=e.filter,r=e.onClick,o=""===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(a.jsx)("ul",{children:o.map((function(e){return Object(a.jsxs)("li",{children:[e.name,": ",e.number,Object(a.jsx)("button",{id:e.id,onClick:r,children:"Delete"})]},e.id)}))})},s=function(e){var n=e.onFormSubmit,t=e.name,r=e.onNameChange,o=e.number,c=e.onNumberChange;return Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:t,onChange:r}),Object(a.jsx)("br",{}),"number: ",Object(a.jsx)("input",{value:o,onChange:c})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.filter,t=e.onFilterChange;return Object(a.jsxs)("div",{children:["filter shown with ",Object(a.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"message ".concat(n[1]),children:n[0]})},b=t(4),f=t.n(b),m="/api/persons",j={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},update:function(e){return f.a.put("".concat(m,"/").concat(e.id),e)},remove:function(e){return!!window.confirm("Do you really want to delete ".concat(e.name))&&f.a.delete("".concat(m,"/").concat(e.id))}},h=function(){var e=Object(u.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(u.useState)(""),b=Object(c.a)(o,2),f=b[0],m=b[1],h=Object(u.useState)(""),O=Object(c.a)(h,2),p=O[0],v=O[1],g=Object(u.useState)(""),x=Object(c.a)(g,2),w=x[0],C=x[1],k=Object(u.useState)(null),S=Object(c.a)(k,2),y=S[0],N=S[1];Object(u.useEffect)((function(){j.getAll().then((function(e){r(e)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(d,{message:y}),Object(a.jsx)(l,{filter:w,onFilterChange:function(e){return C(e.target.value)}}),Object(a.jsx)("h2",{children:"Add new entry"}),Object(a.jsx)(s,{onFormSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===f}));if(n)window.confirm("".concat(f," is already added to the phonebook, replace the old number with a new one?"))?(n.number=p,j.update(n).then(m(""),v(""),N(["Changed ".concat(n.name,"'s number")]),setTimeout((function(){N(null)}),5e3)).catch((function(e){N([e.message,"error"]),setTimeout((function(){N(null)}),5e3)}))):(m(""),v(""),N(["Number was not replaced","error"]),setTimeout((function(){N(null)}),5e3));else{var o={name:f,number:p,id:t.length>0?t[t.length-1].id+1:1};j.create(o).then((function(e){r(t.concat(e)),m(""),v(""),N(["Added ".concat(o.name)]),setTimeout((function(){N(null)}),5e3)})).catch((function(e){N([e.response.data.error,"error"]),setTimeout((function(){N(null)}),5e3)}))}},name:f,onNameChange:function(e){return m(e.target.value)},number:p,onNumberChange:function(e){return v(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(i,{persons:t,filter:w,onClick:function(e){e.preventDefault();var n=t.find((function(n){return n.id.toString()===e.target.id}));j.remove(n).then((function(e){r(t.filter((function(e){return e.id!==n.id}))),N(["Information about ".concat(n.name," is removed")]),setTimeout((function(){N(null)}),5e3)})).catch((function(e){N(["Information about ".concat(n.name," is already removed"),"error"]),setTimeout((function(){N(null)}),5e3)}))}})]})};o.a.render(Object(a.jsx)(h,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a8086aca.chunk.js.map